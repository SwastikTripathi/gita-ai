<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bhagavad Gita AI</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500&family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script>
        (function() {            
            localStorage.setItem('theme', 'dark');
            const storedTheme = localStorage.getItem('theme');
            console.log('Stored theme in head:', storedTheme);
            const currentTheme = storedTheme || 'dark';
            console.log('Setting theme in head to:', currentTheme);
            document.documentElement.setAttribute('data-theme', currentTheme);
        })();
    </script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/theme-toggles@4.10.1/css/simple.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="navbar">
        <a style="color: var(--text-color); text-decoration: none;" href="#">
            <div class="brand">
                <span class="logo"></span> Bhagavad Gita AI
            </div>
        </a>
        <div class="icons">
            <button class="verse-btn" title="View Random Verses">
                <img src="https://github.com/SwastikTripathi/gita-ai/blob/main/static/img/random.png" alt="Verses">
            </button>
            <button class="help-btn" id="help-btn" title="Help">
                <img src="https://github.com/SwastikTripathi/gita-ai/blob/main/static/img/help-dark.png?raw=true" alt="Help">
            </button>
            <button class="clear-btn" id="clear-btn" title="Clear Conversation">
                <img src="https://github.com/SwastikTripathi/gita-ai/blob/main/static/img/new-dark.png?raw=true" alt="Clear">
            </button>
            <button id="theme-toggle-btn" class="theme-toggle" type="button" title="Toggle theme" aria-label="Toggle theme">
                <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="1em" height="1em" class="theme-toggle__simple" fill="currentColor" viewBox="0 0 32 32">
                    <clipPath id="theme-toggle__simple__cutout">
                        <path d="M0-5h55v37h-55zm32 12a1 1 0 0025 0 1 1 0 00-25 0" />
                    </clipPath>
                    <g clip-path="url(#theme-toggle__simple__cutout)">
                        <circle cx="16" cy="16" r="15" />
                    </g>
                </svg>
            </button>
        </div>
    </div>
    <div class="navbar-border"></div>
    <div class="chat-window">
        <div class="initial-screen">
            <h1 class="welcome-line1" id="initial-greeting">Hare Krishna, welcome to GitaLive</h1>
            <h1 class="welcome-line2" id="welcome-line2">How can I help you this morning?</h1>
            <p style="font-size: 12px; color: #78909C; margin-top: 10px;">Note: Responses may take up to 2 minutes due to deep analysis.</p>
            <div class="initial-input-container">
                <textarea id="initial-input" placeholder="Ask a question..."></textarea>
                <button id="initial-send-button" title="Send">
                    <img src="https://github.com/SwastikTripathi/gita-ai/blob/main/static/img/arrow-dark.png?raw=true" alt="Send">
                </button>
            </div>
            <div class="prompt-buttons">
                <div class="row">
                    <button class="prompt-btn" onclick="setPrompt('What is the purpose of life?')">What is the purpose of life?</button>
                    <button class="prompt-btn" onclick="setPrompt('How can I find peace?')">How can I find peace?</button>
                    <button class="prompt-btn" onclick="setPrompt('What is true happiness?')">What is true happiness?</button>
                </div>
                <div class="row">
                    <button class="prompt-btn" onclick="setPrompt('How to overcome fear?')">How to overcome fear?</button>
                    <button class="prompt-btn" onclick="setPrompt('What is my duty?')">What is my duty?</button>
                </div>
            </div>
        </div>
        <div id="conversation">
            <div class="message-wrapper ai">
                <div class="message">
                    <div class="text"><em>Disclaimer: I am Gita AI</em></div>
                    <span class="timestamp"></span>
                </div>
            </div>
        </div>
        <div id="input-area" class="input-area">
            <textarea id="user-input" placeholder="Ask a question..."></textarea>
            <button id="send-button" title="Send">
                <img src="https://github.com/SwastikTripathi/gita-ai/blob/main/static/img/arrow-dark.png?raw=true" alt="Send">
            </button>
        </div>
    </div>
    <div id="verse-display" class="verse-display">
        <div id="verse-content"></div>
        <button id="prev-verse">
            <img src="https://github.com/SwastikTripathi/gita-ai/blob/main/static/img/left-arrow-dark.png?raw=true" alt="Previous Verse" class="verse-arrow">
        </button>
        <button id="next-verse">
            <img src="https://github.com/SwastikTripathi/gita-ai/blob/main/static/img/right-arrow-dark.png?raw=true" alt="Next Verse" class="verse-arrow">
        </button>
    </div>
    <div class="version-label">Bhagavad Gita AI v1.0</div>

    <div id="modal" class="modal">
        <div class="modal-content">
            <p>This will delete the current session. Press Enter or click Clear to confirm.</p>
            <button id="modal-clear-btn">Clear</button>
        </div>
    </div>

    <div id="help-modal" class="modal">
        <div class="modal-content">
            <h2>Help</h2>
            <p>Welcome to Bhagavad Gita AI. Here’s how to use it:</p>
            <ul>
                <li>Type your message and press Enter or click Send to chat.</li>
                <li>Responses may take up to 2 minutes due to deep analysis.</li>
                <li>Hover over your messages and click the edit icon to edit them.</li>
                <li>Press Ctrl+Shift+C or click the trash icon to clear the conversation.</li>
                <li>Toggle between light and dark themes using the theme button.</li>
            </ul>
            <button id="help-close-btn">Close</button>
        </div>
    </div>

    <audio id="notification-sound" src="static/notification.mp3" preload="auto"></audio>
    
    <button id="waterdrop-btn" title="Support Me">
        <img src="https://github.com/SwastikTripathi/gita-ai/blob/main/static/img/coffee-cup.png?raw=true" alt="Coffee Cup" style="width: 24px; height: 24px; vertical-align: middle;">
    </button>

    <div id="sliding-menu" class="sliding-menu">
        <p style="font-size: 12px;">Hare Krishna, did you gain any peace? This is a project I'm working on and improving regularly—if it helped, maybe <a href="https://buymeacoffee.com/not.a.toaster" target="_blank">buy me a coffee</a>? I would love to hear your response</p>
    </div>

    <script src="script.js" defer></script>
</body>
</html>
